{% extends "components/base.html" %}

{% block header %}
    {% include 'components/navbar_user.html' %}
    {% include 'components/messages.html' %}
{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="/static/css/list.css" crossorigin="anonymous" xmlns="http://www.w3.org/1999/html">

    <div class="container-fluid">
        <div class="row text-start link-back">
			<a class="link fw-bold text-navy fs-6" href="{{ url_for('dashboard') }}">â—„ Back to home</a>
		</div>

        <p id="saveTime" class="text-dark fs-5"></p>

        <div class="row row-cols-1 row-cols-xl-2">
            <div class="col mb-5">
                <div class="d-flex flex-row mb-4">
                    <input id="titleText" class="form-text w-100 text-navy fs-1 fw-bold flex-grow-1 m-0 me-3" type="text" placeholder="Title" value="{{ list.title }}" autocomplete="off"/>
                    <button id="saveBtn" class="btn btn-lg btn-navy text-white fs-6 arial">Save</button>
                </div>

                <table class="table table-borderless table-striped shadow">
                    <tbody id="contentContainer" class="w-100">
                        {% if not list.content %}
                            <tr class="d-flex flex-row">
                                <td class="flex-grow-1">
                                    <input class="form-text w-100" type="text" placeholder="...">
                                </td>
                                <td>
                                    <button class="btn btn-danger btn-delete" onclick="this.parentElement.parentElement.parentElement.removeChild(this.parentElement.parentElement);">
                                        <img style="scale: 1.5;" src="/static/img/trash.svg"/>
                                    </button>
                                </td>
                            </tr>
                        {% endif %}
                        {% for item in list.content %}
                            <tr class="d-flex flex-row">
                                <td class="flex-grow-1">
                                    <input class="form-text w-100" type="text" placeholder="..." value="{{ item }}"/>
                                </td>
                                <td>
                                    <button class="btn btn-danger btn-delete" onclick="this.parentElement.parentElement.parentElement.removeChild(this.parentElement.parentElement);">
                                        <img style="scale: 1.5;" src="/static/img/trash.svg"/>
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="text-center mt-3">
                    <button id="addBtn" class="btn btn-green rounded-pill p-1 pe-3 d-inline fs-6 arial text-white align-middle">
                        <img src="/static/img/plus.svg" width="40px" height="40px"/>
                        Add new row
                    </button>
                </div>
            </div>
            <div class="col text-center">
                {% if role in "owner" %}
                    <button class="btn btn-lg btn-navy text-white mw-100 fs-6 arial" type="button" data-bs-toggle="modal" data-bs-target="#inviteModal">
                        Invite Friends & Family
                    </button>
                {% endif %}
                <div class="col text-center mt-3">
                    <p>Your role: {{ role }}</p>
                </div>
            </div>
        </div>
    </div>

    {% with id="inviteModal", header="Manage access", body="", submit_action="", submit_color="primary", submit_text="Submit" %}
		{% include 'components/modal.html' %}
	{% endwith %}

    <script src="/static/js/list.js" type="text/javascript"></script>
{% endblock %}